<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Drunk - Punk</title>
 <link rel="icon" href="favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f8f8fa; margin: 0; padding: 0; }
    h1 { text-align: center; color: #208278; margin-top: 30px; }
    @media (max-width: 600px) {
  h1 { margin-top: 70px;} /* nebo klidnƒõ 20px, uprav si podle oka */
  }
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      background: #2196f3;
      color: white;
      display: flex;
      justify-content: flex-end;
      gap: 2px;
      z-index: 1000;
      box-shadow: 0 2px 8px #0002;
      padding: 7px 0;
    }
    .nav-link {
      color: white;
      padding: 7px 24px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.07em;
      border-radius: 0 0 10px 10px;
      transition: background 0.18s;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .nav-link.active, .nav-link:hover {
      background: #1760a3;
    }
    body { padding-top: 48px; }
  @media (max-width:520px) {
    h1 {font-size:1.80em;}
    .farm {
      max-width: 100vw;
      gap: 16px;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(7, 80px);
    }
    .plot {min-width:52px; min-height:52px; font-size:0.97em;}
    .progress-bg {width:36px;}
    .select-crop, .shop-modal {min-width:90vw;}
  }
  @media (max-width:600px) {
    .nav-bar { justify-content: center; flex-wrap: wrap; font-size: 0.97em; }
    .nav-link { padding: 7px 8px; font-size: 1em;}
  }
  body { padding-top: 48px; }
  .sekce { background: #fff; border-radius: 14px; box-shadow: 0 2px 16px #b7d9db35; margin: 20px auto 0 auto; padding: 18px 16px 15px 16px; max-width: 430px;}
  .sekce h2 {margin-top:0;}
  .list {margin:8px 0;}
  .polozka {padding: 5px 0 5px 0; font-size: 1.08em; border-bottom: 1px solid #eee; display:flex;align-items:center;}
  .ikona {font-size: 1.22em; margin-right:7px;}
  .none {color:#aaa;}
  /* ---- NOV√â STYLY PRO KARTY HOST≈Æ ---- */
  .host-cards {
    max-width: 430px;
    margin: 25px auto 0 auto;
    display: flex;
    flex-direction: column;
    gap: 18px;
  }
  .pub-card {
    background: #f6f8fa;
    box-shadow: 0 4px 18px #0003, 0 2px 4px #2221;
    border-radius: 17px;
    max-width: 430px;
    margin: 0 auto;
    padding: 18px 20px 16px 20px;
    color: #222;
    font-size: 1.12em;
    position: relative;
  }
   .nav-link-stats {
      background: #e26e08 !important;  /* zlat√°, nebo t≈ôeba #ff66a3, #a0e370, prostƒõ nƒõco co nikde jinde nen√≠ */
      color: #333 !important;
      border-radius: 11px;
      margin-left: 6px;
     font-size: 1.32em;  /* vƒõt≈°√≠ emoji, a≈• to sv√≠t√≠ */
     box-shadow: 0 2px 10px #ffd70033;
     border: 2.5px solid #fff;
     filter: saturate(1.4) brightness(1.12); 
    }
  .pub-card .img {
    width: 55px;
    height: 55px;
    border-radius: 11px;
    box-shadow: 0 2px 8px #7775;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.1em;
    margin-right: 15px;
  }
  .pub-card .header {
    display: flex;
    align-items: center;
    margin-bottom: 9px;
  }
  .pub-card .desc {
    font-size: 1.03em;
    margin-bottom: 9px;
    color: #444;
  }
  .pub-card .btn-row {
    display: flex;
    gap: 10px;
    margin-top: 9px;
  }
  .pub-card button {
    background: #22a324;
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 8px 14px;
    font-size: 1em;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 6px #8883;
    transition: background 0.15s;
  }
  .pub-card button.reject {
    background: #d44;
  }
  .pub-card button:disabled {
    background: #aaa;
    cursor: default;
    opacity: 0.7;
  }
  .pub-card .alert {
    display: flex;
    align-items: center;
    margin-top: 12px;
    color: #c60000;
    font-weight: bold;
    font-size: 1.1em;
    gap: 7px;
  }
  .pub-card .alert .icon {
    font-size: 1.3em;
    margin-right: 4px;
  }
  .pub-card .done {
    color: #177d0f;
    font-weight: bold;
    margin-top: 11px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .pub-card .done .icon {
    font-size: 1.25em;
  }
  .back-disketa {
  position: fixed;
  top: 65px; /* nebo 60px podle p≈ôesn√© v√Ω≈°ky navigace! */
  left: 10px;
  font-size: 2em;
  background: #22c55e;
  border: none;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  cursor: pointer;
  padding: 0.08em 0.42em 0.13em 0.42em;
  z-index: 2002;
  transition: background 0.18s;
  line-height: 1.1em;
}

.back-disketa:hover {
  background: #16a34a;
}
@media (max-width:600px) {
  .back-disketa {
    top: 95px; /* pokud m√° navigace na mobilu vƒõt≈°√≠ v√Ω≈°ku */
    left: 10px;
    font-size: 1.6em;
    padding: 0.02em 0.33em 0.13em 0.33em;
  }
}
</style>
</head>
<body>
  <div class="nav-bar">
    <a href="pestovani.html" class="nav-link">üå± Grow Sh*t</a>
<a href="vyroba.html" class="nav-link">‚öóÔ∏è Brewing</a>
<a href="jzd.html" class="nav-link">üê∑ Coop</a>
<a href="sklad.html" class="nav-link">üì¶ Stash</a>
<a href="hotel.html" class="nav-link">üè® Motel</a>
<a href="pub.html" class="nav-link active">üè° Bar</a>
<a href="market.html" class="nav-link">üè™ Bazaar</a>
<a href="finance.html" class="nav-link">üí∞ Wallet</a>
<a class="nav-link nav-link-stats" href="statistiky.html">üìä</a>  
</div>
<button class="back-disketa" onclick="saveLocalStorageToCloud()" title="Save game to cloud">
  üíæ
</button>
 <h1>üè° Bar</h1>
<div id="balances" style="text-align:center; margin: 10px 0; font-weight: bold; font-size: 1.2em;">
  <b>üíµ Balance: <span id="money"></span> $<br> 
  ü™ô PI Coins: <span id="pi-balance"></span></b> œñ
</div>
<div id="msg" style="color:#1760a3; margin:14px 0 0 0; font-weight:bold; font-size:1.13em; text-align:center; width:100%; display:block;"></div>
  
  <!-- NOV√Å SEKCE: KARTY HOST≈Æ -->
  <div class="host-cards" id="pubCards"></div>
  
  <!-- M≈Æ≈ΩE≈† smazat starou sekci s "Aktu√°ln√≠ zak√°zkou", nebo ji schovat -->
  <!-- <div class="sekce" id="orderSection"> ... </div> -->

<script>
 // --- Inicializace v√Ωchoz√≠ch hodnot, pokud chyb√≠ ---
if (!localStorage.getItem("lihobaronFarmStorage")) {
  localStorage.setItem("lihobaronFarmStorage", JSON.stringify({
    p≈°enice: 0, chmel: 0, kuku≈ôice: 0, reva: 0, jablko: 0, hru≈°ky: 0, ≈°vestky: 0,
    meru≈àky: 0, broskve: 0, mrkev: 0, brambora: 0, rajƒçata: 0, chilli: 0,
    okurky: 0, t≈ôe≈°nƒõ: 0, cibule: 0, ƒçesnek: 0, jahody: 0
  }));
}
if (!localStorage.getItem("lihobaronFarmSeeds")) {
  localStorage.setItem("lihobaronFarmSeeds", JSON.stringify({
    p≈°enice: 0, chmel: 0, kuku≈ôice: 0, reva: 0, jablko: 0, hru≈°ka: 0, ≈°vestka: 0,
    meru≈àka: 0, broskev: 0, mrkev: 0, brambora: 0, rajƒçata: 0, chilli: 0,
    okurky: 0, t≈ôe≈°nƒõ: 0, cibule: 0, ƒçesnek: 0, jahody: 0
  }));
}
if (!localStorage.getItem("lihobaronFarmXP")) {
  localStorage.setItem("lihobaronFarmXP", 0);
}
if (!localStorage.getItem("lihobaronFarmCoins")) {
  localStorage.setItem("lihobaronFarmCoins", 200);
}
if (!localStorage.getItem("lihobaronPi")) {
  localStorage.setItem("lihobaronPi", 200);
}
function getMoney() {
  return +(localStorage.getItem("lihobaronFarmCoins") || 0);
}
function getPi() {
  let val = localStorage.getItem("lihobaronPi");
  if (!val) return 0;
  try {
    return JSON.parse(val);
  } catch (e) {
    return 0;
  }
}

// Po naƒçten√≠ str√°nky zobraz√≠me z≈Østatky
document.getElementById("money").textContent = getMoney();
document.getElementById("pi-balance").textContent = getPi();

const HOST_TYPES = [
  {
    emoji: "ü™ñ",
    name: "Soldier on Leave",
    desc: "Army‚Äôs working hard, but tonight it‚Äôs party time!",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 2, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 5, nazev: "Beer" }, { produkt: "palenka_broskve", pocet: 3, nazev: "Peach Brandy" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 16, nazev: "Beer" }, { produkt: "palenka_broskve", pocet: 6, nazev: "Peach Brandy" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "hard" }
    ]
  },
 
  {
    emoji: "ü¶∏‚Äç‚ôÇÔ∏è",
    name: "Superhero Afterparty",
    desc: "Power-up before next mission.",
    levels: [
      { produkty: [{ produkt: "med", pocet: 2, nazev: "Honey" }, { produkt: "pivo", pocet: 1, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "med", pocet: 5, nazev: "Honey" }, { produkt: "pivo", pocet: 5, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "medium" },
      { produkty: [{ produkt: "med", pocet: 9, nazev: "Honey" }, { produkt: "pivo", pocet: 9, nazev: "Beer" }, { produkt: "vino", pocet: 5, nazev: "Wine" }, { produkt: "palenka_meru≈àky", pocet: 3, nazev: "Apricot brandy" }], obt: "hard" },
      { produkty: [{ produkt: "med", pocet: 15, nazev: "Honey" }, { produkt: "vino", pocet: 10, nazev: "Wine" }, { produkt: "pivo", pocet: 10, nazev: "Beer" }, { produkt: "palenka_broskve", pocet: 7, nazev: "Peach brandy" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üêù",
    name: "Beekeeper Convention",
    desc: "Sweet tooths everywhere.",
    levels: [
      { produkty: [{ produkt: "med", pocet: 3, nazev: "Honey" }], obt: "easy" },
      { produkty: [{ produkt: "med", pocet: 6, nazev: "Honey" }, { produkt: "marmelada_jahody", pocet: 2, nazev: "Strawberry jam" }], obt: "medium" },
      { produkty: [{ produkt: "med", pocet: 10, nazev: "Honey" }, { produkt: "marmelada_meru≈àky", pocet: 4, nazev: "Apricot jam" }, { produkt: "marmelada_broskve", pocet: 3, nazev: "Peach jam" }], obt: "hard" },
      { produkty: [{ produkt: "med", pocet: 18, nazev: "Honey" }, { produkt: "marmelada_≈°vestky", pocet: 5, nazev: "Plum jam" }, { produkt: "marmelada_jablko", pocet: 5, nazev: "Apple jam" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üé∏",
    name: "Folk Band",
    desc: "Need inspiration and sugar rush.",
    levels: [
      { produkty: [{ produkt: "cider", pocet: 2, nazev: "Cider" }], obt: "easy" },
      { produkty: [{ produkt: "cider", pocet: 4, nazev: "Cider" }, { produkt: "marmelada_broskve", pocet: 2, nazev: "Peach jam" }], obt: "medium" },
      { produkty: [{ produkt: "cider", pocet: 7, nazev: "Cider" }, { produkt: "marmelada_jahody", pocet: 3, nazev: "Strawberry jam" }, { produkt: "med", pocet: 3, nazev: "Honey" }], obt: "hard" },
      { produkty: [{ produkt: "cider", pocet: 12, nazev: "Cider" }, { produkt: "marmelada_meru≈àky", pocet: 6, nazev: "Apricot jam" }, { produkt: "med", pocet: 6, nazev: "Honey" }, { produkt: "palenka_jablka", pocet: 2, nazev: "Calvados" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üéÇ",
    name: "Birthday Squad",
    desc: "Cakes, jams and party shots.",
    levels: [
      { produkty: [{ produkt: "marmelada_jahody", pocet: 2, nazev: "Strawberry jam" }, { produkt: "pivo", pocet: 1, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "marmelada_t≈ôe≈°nƒõ", pocet: 2, nazev: "Cherry jam" }, { produkt: "pivo", pocet: 3, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "medium" },
      { produkty: [{ produkt: "marmelada_meru≈àky", pocet: 4, nazev: "Apricot jam" }, { produkt: "palenka_meru≈àky", pocet: 2, nazev: "Apricot brandy" }, { produkt: "vino", pocet: 5, nazev: "Wine" }], obt: "hard" },
      { produkty: [{ produkt: "marmelada_≈°vestky", pocet: 6, nazev: "Plum jam" }, { produkt: "palenka_≈°vestky", pocet: 5, nazev: "Slivovitz" }, { produkt: "pivo", pocet: 10, nazev: "Beer" }, { produkt: "vino", pocet: 10, nazev: "Wine" }], obt: "extreme" }
    ]
  },
  {
    emoji: "ü§°",
    name: "Clown Parade",
    desc: "Needs sugar to be funny.",
    levels: [
      { produkty: [{ produkt: "popkorn", pocet: 3, nazev: "Popcorn" }, { produkt: "marmelada_t≈ôe≈°nƒõ", pocet: 1, nazev: "Cherry jam" }], obt: "easy" },
      { produkty: [{ produkt: "popkorn", pocet: 5, nazev: "Popcorn" }, { produkt: "marmelada_jablko", pocet: 2, nazev: "Apple jam" }], obt: "medium" },
      { produkty: [{ produkt: "popkorn", pocet: 8, nazev: "Popcorn" }, { produkt: "marmelada_meru≈àky", pocet: 3, nazev: "Apricot jam" }, { produkt: "marmelada_broskve", pocet: 3, nazev: "Peach jam" }], obt: "hard" },
      { produkty: [{ produkt: "popkorn", pocet: 12, nazev: "Popcorn" }, { produkt: "marmelada_jahody", pocet: 6, nazev: "Strawberry jam" }, { produkt: "marmelada_≈°vestky", pocet: 4, nazev: "Plum jam" }], obt: "extreme" }
    ]
  },
  {
    emoji: "ü¶Ü",
    name: "Duck Club",
    desc: "Vodka and fries, quack quack!",
    levels: [
      { produkty: [{ produkt: "vodka_psenice", pocet: 2, nazev: "Vodka" }, { produkt: "hranolky", pocet: 1, nazev: "Fries" }], obt: "easy" },
      { produkty: [{ produkt: "vodka_psenice", pocet: 5, nazev: "Vodka" }, { produkt: "hranolky", pocet: 4, nazev: "Fries" }], obt: "medium" },
      { produkty: [{ produkt: "vodka_psenice", pocet: 8, nazev: "Vodka" }, { produkt: "hranolky", pocet: 7, nazev: "Fries" }, { produkt: "pivo", pocet: 3, nazev: "Beer" }], obt: "hard" },
      { produkty: [{ produkt: "vodka_psenice", pocet: 12, nazev: "Vodka" }, { produkt: "hranolky", pocet: 10, nazev: "Fries" }, { produkt: "pivo", pocet: 10, nazev: "Beer" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üêó",
    name: "Boar Hunters",
    desc: "Plum booze or riot.",
    levels: [
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 2, nazev: "Slivovitz" }], obt: "easy" },
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 6, nazev: "Slivovitz" }], obt: "medium" },
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 12, nazev: "Slivovitz" }, { produkt: "pivo", pocet: 4, nazev: "Beer" }], obt: "hard" },
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 20, nazev: "Slivovitz" }, { produkt: "vino", pocet: 10, nazev: "Wine" }, { produkt: "pivo", pocet: 10, nazev: "Beer" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üßë‚Äçüç≥",
    name: "Master Chefs",
    desc: "Only the best jams and spirits.",
    levels: [
      { produkty: [{ produkt: "marmelada_meru≈àky", pocet: 2, nazev: "Apricot jam" }, { produkt: "palenka_meru≈àky", pocet: 1, nazev: "Apricot brandy" }], obt: "easy" },
      { produkty: [{ produkt: "marmelada_broskve", pocet: 3, nazev: "Peach jam" }, { produkt: "palenka_broskve", pocet: 2, nazev: "Peach brandy" }], obt: "medium" },
      { produkty: [{ produkt: "marmelada_jahody", pocet: 5, nazev: "Strawberry jam" }, { produkt: "palenka_jablka", pocet: 2, nazev: "Calvados" }], obt: "hard" },
      { produkty: [{ produkt: "marmelada_≈°vestky", pocet: 7, nazev: "Plum jam" }, { produkt: "palenka_≈°vestky", pocet: 4, nazev: "Slivovitz" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üêê",
    name: "Goat Cheese Gourmets",
    desc: "Vodka, cheese and jam for that fine taste.",
    levels: [
      { produkty: [{ produkt: "vodka_psenice", pocet: 1, nazev: "Vodka" }, { produkt: "marmelada_jablko", pocet: 1, nazev: "Apple jam" }], obt: "easy" },
      { produkty: [{ produkt: "vodka_psenice", pocet: 3, nazev: "Vodka" }, { produkt: "marmelada_jablko", pocet: 2, nazev: "Apple jam" }, { produkt: "hranolky", pocet: 2, nazev: "Fries" }], obt: "medium" },
      { produkty: [{ produkt: "vodka_psenice", pocet: 7, nazev: "Vodka" }, { produkt: "marmelada_meru≈àky", pocet: 4, nazev: "Apricot jam" }, { produkt: "hranolky", pocet: 6, nazev: "Fries" }], obt: "hard" },
      { produkty: [{ produkt: "vodka_psenice", pocet: 12, nazev: "Vodka" }, { produkt: "marmelada_broskve", pocet: 7, nazev: "Peach jam" }, { produkt: "hranolky", pocet: 10, nazev: "Fries" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üßü‚Äç‚ôÇÔ∏è",
    name: "Zombie Apocalypse",
    desc: "Need sugar and booze to stay undead.",
    levels: [
      { produkty: [{ produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "vino", pocet: 4, nazev: "Wine" }, { produkt: "popkorn", pocet: 4, nazev: "Popcorn" }], obt: "medium" },
      { produkty: [{ produkt: "vino", pocet: 8, nazev: "Wine" }, { produkt: "palenka_jablka", pocet: 2, nazev: "Calvados" }], obt: "hard" },
      { produkty: [{ produkt: "vino", pocet: 15, nazev: "Wine" }, { produkt: "palenka_hru≈°ky", pocet: 4, nazev: "Pear brandy" }, { produkt: "popkorn", pocet: 12, nazev: "Popcorn" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üßë‚Äç‚öñÔ∏è",
    name: "Judge‚Äôs Happy Hour",
    desc: "Decide your fate over brandy and beer.",
    levels: [
      { produkty: [{ produkt: "palenka_meru≈àky", pocet: 1, nazev: "Apricot brandy" }, { produkt: "pivo", pocet: 2, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "palenka_broskve", pocet: 3, nazev: "Peach brandy" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }], obt: "medium" },
      { produkty: [{ produkt: "palenka_meru≈àky", pocet: 5, nazev: "Apricot brandy" }, { produkt: "pivo", pocet: 10, nazev: "Beer" }, { produkt: "vino", pocet: 3, nazev: "Wine" }], obt: "hard" },
      { produkty: [{ produkt: "palenka_meru≈àky", pocet: 10, nazev: "Apricot brandy" }, { produkt: "pivo", pocet: 15, nazev: "Beer" }, { produkt: "vino", pocet: 8, nazev: "Wine" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üöú",
    name: "Farmers‚Äô Meetup",
    desc: "Everything from the fields, plus a shot.",
    levels: [
      { produkty: [{ produkt: "hranolky", pocet: 2, nazev: "Fries" }, { produkt: "pivo", pocet: 2, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "hranolky", pocet: 5, nazev: "Fries" }, { produkt: "pivo", pocet: 4, nazev: "Beer" }, { produkt: "vino", pocet: 1, nazev: "Wine" }], obt: "medium" },
      { produkty: [{ produkt: "hranolky", pocet: 8, nazev: "Fries" }, { produkt: "pivo", pocet: 8, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }, { produkt: "vodka_psenice", pocet: 2, nazev: "Vodka" }], obt: "hard" },
      { produkty: [{ produkt: "hranolky", pocet: 15, nazev: "Fries" }, { produkt: "pivo", pocet: 15, nazev: "Beer" }, { produkt: "vino", pocet: 8, nazev: "Wine" }, { produkt: "vodka_psenice", pocet: 5, nazev: "Vodka" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üëë",
    name: "Royal Feast",
    desc: "Jams, spirits and a royal headache.",
    levels: [
      { produkty: [{ produkt: "marmelada_meru≈àky", pocet: 2, nazev: "Apricot jam" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "marmelada_broskve", pocet: 4, nazev: "Peach jam" }, { produkt: "vino", pocet: 5, nazev: "Wine" }, { produkt: "palenka_hru≈°ky", pocet: 2, nazev: "Pear brandy" }], obt: "medium" },
      { produkty: [{ produkt: "marmelada_jablko", pocet: 8, nazev: "Apple jam" }, { produkt: "vino", pocet: 10, nazev: "Wine" }, { produkt: "palenka_≈°vestky", pocet: 4, nazev: "Slivovitz" }], obt: "hard" },
      { produkty: [{ produkt: "marmelada_≈°vestky", pocet: 12, nazev: "Plum jam" }, { produkt: "vino", pocet: 15, nazev: "Wine" }, { produkt: "palenka_jablka", pocet: 7, nazev: "Calvados" }, { produkt: "vodka_psenice", pocet: 7, nazev: "Vodka" }], obt: "extreme" }
    ]
  },
  {
    emoji: "ü•á",
    name: "Sports Team Win",
    desc: "Celebrating with everything on tap.",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 4, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 10, nazev: "Beer" }, { produkt: "vino", pocet: 4, nazev: "Wine" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 20, nazev: "Beer" }, { produkt: "vino", pocet: 8, nazev: "Wine" }, { produkt: "rum_brambora", pocet: 3, nazev: "Rum" }], obt: "hard" },
      { produkty: [{ produkt: "pivo", pocet: 40, nazev: "Beer" }, { produkt: "vino", pocet: 12, nazev: "Wine" }, { produkt: "rum_brambora", pocet: 6, nazev: "Rum" }, { produkt: "popkorn", pocet: 10, nazev: "Popcorn" }], obt: "extreme" }
    ]
  },
  {
    emoji: "ü¶â",
    name: "Night Owls",
    desc: "Keep them awake with sugar and spirits.",
    levels: [
      { produkty: [{ produkt: "marmelada_t≈ôe≈°nƒõ", pocet: 2, nazev: "Cherry jam" }], obt: "easy" },
      { produkty: [{ produkt: "marmelada_jahody", pocet: 3, nazev: "Strawberry jam" }, { produkt: "vodka_psenice", pocet: 2, nazev: "Vodka" }], obt: "medium" },
      { produkty: [{ produkt: "marmelada_≈°vestky", pocet: 6, nazev: "Plum jam" }, { produkt: "rum_brambora", pocet: 2, nazev: "Rum" }], obt: "hard" },
      { produkty: [{ produkt: "marmelada_meru≈àky", pocet: 10, nazev: "Apricot jam" }, { produkt: "whiskey_kukurice", pocet: 5, nazev: "Whiskey" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üëØ‚Äç‚ôÇÔ∏è",
    name: "Dance Crew",
    desc: "Gotta have jams and shots.",
    levels: [
      { produkty: [{ produkt: "palenka_hru≈°ky", pocet: 2, nazev: "Pear brandy" }], obt: "easy" },
      { produkty: [{ produkt: "palenka_hru≈°ky", pocet: 4, nazev: "Pear brandy" }, { produkt: "pivo", pocet: 3, nazev: "Beer" }], obt: "medium" },
      { produkty: [{ produkt: "palenka_broskve", pocet: 8, nazev: "Peach brandy" }, { produkt: "pivo", pocet: 8, nazev: "Beer" }, { produkt: "popkorn", pocet: 8, nazev: "Popcorn" }], obt: "hard" },
      { produkty: [{ produkt: "palenka_broskve", pocet: 15, nazev: "Peach brandy" }, { produkt: "pivo", pocet: 12, nazev: "Beer" }, { produkt: "vino", pocet: 10, nazev: "Wine" }, { produkt: "popkorn", pocet: 15, nazev: "Popcorn" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üíî",
    name: "Broken Hearts Club",
    desc: "Drown the sorrow in spirits and fries.",
    levels: [
      { produkty: [{ produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "vino", pocet: 6, nazev: "Wine" }, { produkt: "hranolky", pocet: 4, nazev: "Fries" }], obt: "medium" },
      { produkty: [{ produkt: "vino", pocet: 10, nazev: "Wine" }, { produkt: "hranolky", pocet: 8, nazev: "Fries" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }], obt: "hard" },
      { produkty: [{ produkt: "vino", pocet: 18, nazev: "Wine" }, { produkt: "hranolky", pocet: 16, nazev: "Fries" }, { produkt: "pivo", pocet: 15, nazev: "Beer" }, { produkt: "rum_brambora", pocet: 5, nazev: "Rum" }], obt: "extreme" }
    ]
  },
  {
    emoji: "üßõ‚Äç‚ôÇÔ∏è",
    name: "Vampire Bar",
    desc: "Blood red wine... and jam.",
    levels: [
      { produkty: [{ produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "vino", pocet: 5, nazev: "Wine" }, { produkt: "marmelada_t≈ôe≈°nƒõ", pocet: 2, nazev: "Cherry jam" }], obt: "medium" },
      { produkty: [{ produkt: "vino", pocet: 9, nazev: "Wine" }, { produkt: "marmelada_jahody", pocet: 4, nazev: "Strawberry jam" }, { produkt: "palenka_jablka", pocet: 3, nazev: "Calvados" }], obt: "hard" },
      { produkty: [{ produkt: "vino", pocet: 18, nazev: "Wine" }, { produkt: "marmelada_≈°vestky", pocet: 8, nazev: "Plum jam" }, { produkt: "palenka_jablka", pocet: 6, nazev: "Calvados" }, { produkt: "palenka_meru≈àky", pocet: 6, nazev: "Apricot brandy" }], obt: "extreme" }
    ]
  },
  {
    emoji: "ü•∑",
    name: "Stealth Drinkers",
    desc: "No one must know, but everything must go.",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 3, nazev: "Beer" }, { produkt: "vodka_psenice", pocet: 1, nazev: "Vodka" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 7, nazev: "Beer" }, { produkt: "vodka_psenice", pocet: 3, nazev: "Vodka" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 12, nazev: "Beer" }, { produkt: "vodka_psenice", pocet: 6, nazev: "Vodka" }, { produkt: "rum_brambora", pocet: 2, nazev: "Rum" }], obt: "hard" },
      { produkty: [{ produkt: "pivo", pocet: 18, nazev: "Beer" }, { produkt: "vodka_psenice", pocet: 9, nazev: "Vodka" }, { produkt: "rum_brambora", pocet: 5, nazev: "Rum" }, { produkt: "marmelada_broskve", pocet: 6, nazev: "Peach jam" }], obt: "extreme" }
    ]
  },
 {
    emoji: "üë©‚Äç‚ù§‚Äçüë®",
    name: "Lovebirds on a Date",
    desc: "Young couple wants something sweet to sip.",
    levels: [
      { produkty: [{ produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "vino", pocet: 5, nazev: "Wine" }, { produkt: "pivo", pocet: 4, nazev: "Beer" }], obt: "medium" },
      { produkty: [{ produkt: "vino", pocet: 8, nazev: "Wine" }, { produkt: "pivo", pocet: 8, nazev: "Beer" }, { produkt: "palenka_meru≈àky", pocet: 3, nazev: "Apricot brandy" }], odmena: 1050, obt: "hard" }
    ]
  },
  {
    emoji: "üßë‚Äçüåæ",
    name: "Village Boozer",
    desc: "Local legend. Will drink anything that flows.",
    levels: [
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 2, nazev: "Slivowitz" }], obt: "easy" },
      { produkty: [{ produkt: "palenka_hru≈°ky", pocet: 3, nazev: "Pear brandy" }, { produkt: "palenka_≈°vestky", pocet: 3, nazev: "Slivowitz" }], obt: "medium" },
      { produkty: [{ produkt: "palenka_hru≈°ky", pocet: 6, nazev: "Pear brandy" }, { produkt: "palenka_≈°vestky", pocet: 7, nazev: "Slivowitz" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }], obt: "hard" }
    ]
  },
  {
    emoji: "üíº",
    name: "Company Party",
    desc: "Manager pays, accountant cries. Booze flows.",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 4, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 10, nazev: "Beer" }, { produkt: "vino", pocet: 3, nazev: "Wine" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 14, nazev: "Beer" }, { produkt: "vino", pocet: 4, nazev: "Wine" }, { produkt: "palenka_meru≈àky", pocet: 6, nazev: "Apricot brandy" }], obt: "hard" }
    ]
  },
  {
    emoji: "üë¥",
    name: "Gramps Reminisces",
    desc: "He remembers the first beer ever. Wants something strong.",
    levels: [
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 2, nazev: "Slivowitz" }], obt: "easy" },
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 5, nazev: "Slivowitz" }, { produkt: "pivo", pocet: 4, nazev: "Beer" }], obt: "medium" },
      { produkty: [{ produkt: "palenka_≈°vestky", pocet: 8, nazev: "Slivowitz" }, { produkt: "vino", pocet: 4, nazev: "Wine" }], obt: "hard" }
    ]
  },
  {
    emoji: "üéâ",
    name: "Bachelor Party",
    desc: "Drink till someone loses a shoe.",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 3, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 8, nazev: "Beer" }, { produkt: "palenka_broskve", pocet: 2, nazev: "Peach brandy" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 12, nazev: "Beer" }, { produkt: "palenka_broskve", pocet: 5, nazev: "Peach brandy" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "hard" }
    ]
  },
  {
    emoji: "üë©‚Äçüé§",
    name: "The Band",
    desc: "Will play for drinks. Get them inspired.",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 6, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 10, nazev: "Beer" }, { produkt: "vino", pocet: 4, nazev: "Wine" }, { produkt: "palenka_meru≈àky", pocet: 3, nazev: "Apricot brandy" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 12, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }, { produkt: "palenka_meru≈àky", pocet: 7, nazev: "Apricot brandy" }], obt: "hard" }
    ]
  },
   {
    emoji: "üçü",
    name: "Fries & Fruit Lovers",
    desc: "They crave fries and apricots.",
    levels: [
      { produkty: [{ produkt: "hranolky", pocet: 6, nazev: "Fries" }, { produkt: "pivo", pocet: 2, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "hranolky", pocet: 10, nazev: "Fries" }, { produkt: "pivo", pocet: 4, nazev: "Beer" }, { produkt: "palenka_meru≈àky", pocet: 3, nazev: "Apricot brandy" }], obt: "medium" },
      { produkty: [{ produkt: "hranolky", pocet: 12, nazev: "Fries" }, { produkt: "pivo", pocet: 2, nazev: "Beer" }, { produkt: "palenka_meru≈àky", pocet: 7, nazev: "Apricot brandy" }], obt: "hard" }
    ]
  },
    {
    emoji: "üßë‚Äçüíº",
    name: "Office Folks Off-Duty",
    desc: "Escaping the stamp-and-stress zone.",
    levels: [
      { produkty: [{ produkt: "pivo", pocet: 4, nazev: "Beer" }], obt: "easy" },
      { produkty: [{ produkt: "pivo", pocet: 8, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "medium" },
      { produkty: [{ produkt: "pivo", pocet: 14, nazev: "Beer" }, { produkt: "vino", pocet: 4, nazev: "Wine" }], obt: "hard" }
    ]
  },
  
 {
  emoji: "üé¨",
  name: "Movie Night",
  desc: "No popcorn, no show.",
  levels: [
    { produkty: [{ produkt: "popkorn", pocet: 2, nazev: "Popcorn" }], obt: "easy" },
    { produkty: [{ produkt: "popkorn", pocet: 5, nazev: "Popcorn" }, { produkt: "pivo", pocet: 3, nazev: "Beer" }], obt: "medium" },
    { produkty: [{ produkt: "popkorn", pocet: 8, nazev: "Popcorn" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "hard" }
  ]
},
  {
  emoji: "üç∏",
  name: "Party Hard",
  desc: "Uncontrolled vodka flood.",
  levels: [
    { produkty: [{ produkt: "vodka_psenice", pocet: 2, nazev: "Vodka" }], obt: "easy" },
    { produkty: [{ produkt: "vodka_psenice", pocet: 5, nazev: "Vodka" }, { produkt: "pivo", pocet: 3, nazev: "Beer" }], obt: "medium" },
    { produkty: [{ produkt: "vodka_psenice", pocet: 8, nazev: "Vodka" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "hard" }
  ]
},
    {  emoji: "ü•É",
  name: "Sailor‚Äôs Bash",
  desc: "RUM, RUM, and more RUM.",
  levels: [
    { produkty: [{ produkt: "rum_brambora", pocet: 2, nazev: "Rum" }], obt: "easy" },
    { produkty: [{ produkt: "rum_brambora", pocet: 5, nazev: "Rum" }, { produkt: "pivo", pocet: 3, nazev: "Beer" }], obt: "medium" },
    { produkty: [{ produkt: "rum_brambora", pocet: 8, nazev: "Rum" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }, { produkt: "vino", pocet: 2, nazev: "Wine" }], obt: "hard" }
  ]
},
    {   emoji: "üçª",
  name: "TEAM Building",
  desc: "Corn? Now that‚Äôs a feast.",
  levels: [
    { produkty: [{ produkt: "whiskey_kukurice", pocet: 2, nazev: "Whiskey" }], obt: "easy" },
    { produkty: [{ produkt: "whiskey_kukurice", pocet: 5, nazev: "Whiskey" }, { produkt: "popkorn", pocet: 3, nazev: "Popcorn" }], obt: "medium" },
    { produkty: [{ produkt: "whiskey_kukurice", pocet: 8, nazev: "Whiskey" }, { produkt: "pivo", pocet: 6, nazev: "Beer" }, { produkt: "popkorn", pocet: 2, nazev: "Popcorn" }], obt: "hard" }
  ]
},
 {
  emoji: "üçû",
  name: "Bread Fest",
  desc: "They love the smell of fresh bread in the morning.",
  levels: [
    { produkty: [{ produkt: "bread", pocet: 2, nazev: "Bread" }], obt: "easy" },
    { produkty: [{ produkt: "bread", pocet: 5, nazev: "Bread" }, { produkt: "curd", pocet: 2, nazev: "Curd" }], obt: "medium" },
    { produkty: [{ produkt: "bread", pocet: 10, nazev: "Bread" }, { produkt: "curd", pocet: 4, nazev: "Curd" }, { produkt: "goat_cheese", pocet: 2, nazev: "Goat cheese" }], obt: "hard" },
    { produkty: [{ produkt: "bread", pocet: 18, nazev: "Bread" }, { produkt: "curd", pocet: 7, nazev: "Curd" }, { produkt: "goat_cheese", pocet: 6, nazev: "Goat cheese" }, { produkt: "fried_egg", pocet: 4, nazev: "Fried egg" }], obt: "extreme" }
  ]
},
{
  emoji: "üßÄ",
  name: "Curd Crew",
  desc: "Cheese lovers looking for a curd binge.",
  levels: [
    { produkty: [{ produkt: "curd", pocet: 3, nazev: "Curd" }], obt: "easy" },
    { produkty: [{ produkt: "curd", pocet: 7, nazev: "Curd" }, { produkt: "bread", pocet: 2, nazev: "Bread" }], obt: "medium" },
    { produkty: [{ produkt: "curd", pocet: 12, nazev: "Curd" }, { produkt: "goat_cheese", pocet: 5, nazev: "Goat cheese" }, { produkt: "fried_egg", pocet: 2, nazev: "Fried egg" }], obt: "hard" },
    { produkty: [{ produkt: "curd", pocet: 20, nazev: "Curd" }, { produkt: "goat_cheese", pocet: 10, nazev: "Goat cheese" }, { produkt: "bread", pocet: 10, nazev: "Bread" }, { produkt: "bacon", pocet: 2, nazev: "Bacon" }], obt: "extreme" }
  ]
},
{
  emoji: "üêê",
  name: "Goat Cheese Guild",
  desc: "Only the finest goat cheese on the table.",
  levels: [
    { produkty: [{ produkt: "goat_cheese", pocet: 2, nazev: "Goat cheese" }], obt: "easy" },
    { produkty: [{ produkt: "goat_cheese", pocet: 5, nazev: "Goat cheese" }, { produkt: "curd", pocet: 3, nazev: "Curd" }], obt: "medium" },
    { produkty: [{ produkt: "goat_cheese", pocet: 9, nazev: "Goat cheese" }, { produkt: "bread", pocet: 5, nazev: "Bread" }, { produkt: "fried_egg", pocet: 3, nazev: "Fried egg" }], obt: "hard" },
    { produkty: [{ produkt: "goat_cheese", pocet: 15, nazev: "Goat cheese" }, { produkt: "curd", pocet: 8, nazev: "Curd" }, { produkt: "bread", pocet: 12, nazev: "Bread" }, { produkt: "bacon", pocet: 5, nazev: "Bacon" }], obt: "extreme" }
  ]
},
{
  emoji: "üç≥",
  name: "Egg-cellent Brunchers",
  desc: "Eggs. More eggs. And some bacon, please.",
  levels: [
    { produkty: [{ produkt: "fried_egg", pocet: 2, nazev: "Fried egg" }], obt: "easy" },
    { produkty: [{ produkt: "fried_egg", pocet: 6, nazev: "Fried egg" }, { produkt: "bread", pocet: 3, nazev: "Bread" }], obt: "medium" },
    { produkty: [{ produkt: "fried_egg", pocet: 12, nazev: "Fried egg" }, { produkt: "bacon", pocet: 5, nazev: "Bacon" }, { produkt: "curd", pocet: 3, nazev: "Curd" }], obt: "hard" },
    { produkty: [{ produkt: "fried_egg", pocet: 20, nazev: "Fried egg" }, { produkt: "bacon", pocet: 12, nazev: "Bacon" }, { produkt: "goat_cheese", pocet: 8, nazev: "Goat cheese" }, { produkt: "turkey_hamburger", pocet: 3, nazev: "Turkey hamburger" }], obt: "extreme" }
  ]
},
{
  emoji: "ü•ì",
  name: "Bacon Bashers",
  desc: "Crispy bacon, or nothing.",
  levels: [
    { produkty: [{ produkt: "bacon", pocet: 1, nazev: "Bacon" }], obt: "easy" },
    { produkty: [{ produkt: "bacon", pocet: 3, nazev: "Bacon" }, { produkt: "fried_egg", pocet: 2, nazev: "Fried egg" }], obt: "medium" },
    { produkty: [{ produkt: "bacon", pocet: 7, nazev: "Bacon" }, { produkt: "bread", pocet: 5, nazev: "Bread" }, { produkt: "curd", pocet: 3, nazev: "Curd" }], obt: "hard" },
    { produkty: [{ produkt: "bacon", pocet: 15, nazev: "Bacon" }, { produkt: "fried_egg", pocet: 10, nazev: "Fried egg" }, { produkt: "goat_cheese", pocet: 6, nazev: "Goat cheese" }, { produkt: "turkey_hamburger", pocet: 5, nazev: "Turkey hamburger" }], obt: "extreme" }
  ]
},
{
  emoji: "üçî",
  name: "Burger Maniacs",
  desc: "Bring on the turkey hamburgers and all the sides.",
  levels: [
    { produkty: [{ produkt: "turkey_hamburger", pocet: 1, nazev: "Turkey hamburger" }], obt: "easy" },
    { produkty: [{ produkt: "turkey_hamburger", pocet: 3, nazev: "Turkey hamburger" }, { produkt: "bacon", pocet: 2, nazev: "Bacon" }], obt: "medium" },
    { produkty: [{ produkt: "turkey_hamburger", pocet: 7, nazev: "Turkey hamburger" }, { produkt: "fried_egg", pocet: 5, nazev: "Fried egg" }, { produkt: "goat_cheese", pocet: 3, nazev: "Goat cheese" }], obt: "hard" },
    { produkty: [{ produkt: "turkey_hamburger", pocet: 12, nazev: "Turkey hamburger" }, { produkt: "bacon", pocet: 7, nazev: "Bacon" }, { produkt: "curd", pocet: 8, nazev: "Curd" }, { produkt: "bread", pocet: 10, nazev: "Bread" }], obt: "extreme" }
  ]
},
  
{
    emoji: "üë∏",
    name: "VIP Gala",
    desc: "Fancy drinks for the fancy folks.",
    levels: [
      { produkty: [{ produkt: "vino", pocet: 4, nazev: "Wine" }], obt: "easy" },
      { produkty: [{ produkt: "vino", pocet: 5, nazev: "Wine" }, { produkt: "palenka_meru≈àky", pocet: 3, nazev: "Apricot brandy" }], obt: "medium" },
      { produkty: [{ produkt: "vino", pocet: 8, nazev: "Wine" }, { produkt: "palenka_meru≈àky", pocet: 7, nazev: "Apricot brandy" }, { produkt: "pivo", pocet: 10, nazev: "Beer" }], obt: "hard" }
    ]
  }
];
// ------- CEN√çK PRODUKT≈Æ ----------
var prices = {
   p≈°enice: 4, chmel: 9, kuku≈ôice: 12, reva: 12, broskve: 20, meru≈àky: 18, jablko: 13, hru≈°ky: 13, ≈°vestky: 13, mrkev: 9, brambora: 11,  rajƒçata: 12, chilli: 15, okurky: 13,
  cibule: 14, ƒçesnek: 16, jahody: 25, t≈ôe≈°nƒõ: 15,
  kvas_pivo: 18, kvas_vino: 45, most_cider: 50,
  kvas_≈°vestky: 17, kvas_hru≈°ky: 15, kvas_meru≈àky: 18, kvas_broskve: 19, kvas_jablka: 15, kvas_psenice: 12, kvas_kuku≈ôice: 14, kvas_brambora: 15,
  pivo: 32, vino: 60, cider: 70, popkorn: 50, hranolky: 60, testo: 10, bread: 30, curd: 45, goat_cheese: 50, fried_egg: 35, bacon: 70, turkey_hamburger: 60,
  ml√©ko: 30, koz√≠_ml√©ko: 45, vejce: 15, ≈°unka: 45, kr≈Øt√≠_maso: 30, med: 45, vlna: 60, kachn√≠_vejce: 30, kr√°liƒç√≠_maso: 45,
  palenka_≈°vestky: 46, palenka_hru≈°ky: 44, palenka_meru≈àky: 48, palenka_broskve: 50, palenka_jablka: 44, vodka_psenice: 35, whiskey_kukurice: 40, rum_brambora: 42, 
  marmelada_broskve: 70, marmelada_meru≈àky: 65, marmelada_jahody: 70, marmelada_t≈ôe≈°nƒõ: 68, marmelada_≈°vestky: 67, marmelada_hru≈°ky: 64, marmelada_jablko: 63,
};
// ---------------------------------

const firebaseConfig = {
    apiKey: "AIzaSyCfPJJL8cbfxmpWpHG5_icQOZjzGWSpeZI",
    authDomain: "drunk-punk.firebaseapp.com",
    projectId: "drunk-punk",
    storageBucket: "drunk-punk.firebasestorage.app",
    messagingSenderId: "749798531604",
    appId: "1:749798531604:web:9e702aee7c9a2599627d01",
    measurementId: "G-JSFRP622EL"
};
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const firestore = firebase.firestore();
// Po inicializaci Firebase
firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    showMsg("Signed as: " + (user.email || user.uid));
    // (M≈Ø≈æe≈° tu povolit tlaƒç√≠tka/save nebo vykreslit v√≠c informac√≠)
  } else {
    // Nezobrazuj nic. Kdy≈æ chce≈°, m≈Ø≈æe≈° SAVE schovat, ale ≈æ√°dn√° hl√°≈°ka
    // document.querySelector('.back-disketa').style.display='none';
  }
});

function saveLocalStorageToCloud() {
    var piUser = localStorage.getItem("piUser");
    if (!piUser) {
        if (!window.Pi) {
            showMsg("Pi SDK is not loaded!");
            return;
        }
        Pi.authenticate(["username"], function(){})
        .then(function(auth) {
            if (auth && auth.user && auth.user.username) {
                localStorage.setItem("piUser", auth.user.username);
                saveLocalStorageToCloud();
            } else {
                showMsg("Failed to sign in.");
            }
        })
        .catch(function(err) {
            showMsg("Login error: " + err.message);
        });
        return;
    }
    // Sestav data z localStorage
    var data = {};
    for (var i = 0; i < localStorage.length; i++) {
        var key = localStorage.key(i);
        data[key] = localStorage.getItem(key);
    }

    // XP LOGIKA ‚Äì p≈ôid√°n√≠ z√°znamu do XP historie
    var xp = parseInt(data.lihobaronFarmXP || "0", 10);
    var xpHistory;
    try {
        xpHistory = JSON.parse(localStorage.getItem("xpHistory") || "[]");
    } catch(e) {
        xpHistory = [];
    }
    // P≈ôid√°me nov√Ω z√°znam jen pokud je nov√Ω nebo zmƒõna XP
    var posledni = xpHistory.length ? xpHistory[xpHistory.length-1] : null;
    if (!posledni || posledni.xp !== xp) {
        xpHistory.push({
            xp: xp,
            timestamp: Date.now()
        });
        // Ulo≈æ√≠me i zp√°tky do localStorage pro p≈ô√≠≈°tƒõ
        localStorage.setItem("xpHistory", JSON.stringify(xpHistory));
    }
    // Ulo≈æ√≠me historii do Firebase
    data.xpHistory = xpHistory;

    firestore.collection("pi_saves").doc(piUser).set({
        data: data,
        savedAt: new Date().toISOString()
    }).then(function () {
        showMsg("‚úÖ Game saved!");
    }).catch(function (error) {
        showMsg("Saving error: " + error.message);
    });
}

function showMsg(msg) {
  var el = document.getElementById("msg");
  if (!el) return; // fallback kdyby omylem chybƒõl
  el.textContent = msg;
  setTimeout(function() { el.textContent = ""; }, 1800);
}

// --- Funkce na generov√°n√≠ hosta ---
function generujHosta() {
  var typ = HOST_TYPES[Math.floor(Math.random() * HOST_TYPES.length)];
  var level = typ.levels[Math.floor(Math.random() * typ.levels.length)];
  return {
    emoji: typ.emoji,
    name: typ.name,
    desc: typ.desc,
    order: level.produkty,
    obt: level.obt
  };
}

var MAX_HOSTU = 3;

// --- ULO≈ΩEN√ç A NAƒåTEN√ç HOST≈Æ ---
function ulozHosty() {
  localStorage.setItem("lihobaronPubHosti", JSON.stringify(aktHosti));
}
function nactiHosty() {
  var hosti = localStorage.getItem("lihobaronPubHosti");
  if (hosti) return JSON.parse(hosti);
  var arr = [];
  for (var i = 0; i < MAX_HOSTU; i++) arr.push(generujHosta());
  localStorage.setItem("lihobaronPubHosti", JSON.stringify(arr));
  return arr;
}

var aktHosti = nactiHosty();

function getSklad() {
  return JSON.parse(localStorage.getItem("lihobaronFarmStorage") || "{}");
}
function getPrachy() {
  return Number(localStorage.getItem("lihobaronFarmCoins") || 0);
}
function setPrachy(kolik) {
  localStorage.setItem("lihobaronFarmCoins", kolik);
}
function setSklad(obj) {
  localStorage.setItem("lihobaronFarmStorage", JSON.stringify(obj));
}

// --- V√ùPOƒåET ODMƒöNY ---
function vypocetOdmeny(order) {
  var hodnota = 0;
  for (var i = 0; i < order.length; i++) {
    var klic = order[i].produkt;
    hodnota += (prices[klic] || 0) * order[i].pocet;
  }
  // Mar≈æe +15 %
  return Math.round(hodnota * 1.15);
}

function renderPubCards() {
  var html = "";
  for (var idx = 0; idx < aktHosti.length; idx++) {
    var host = aktHosti[idx];
    var sklad = getSklad();
    var dost = true;
    var produkty = "";
    var odmena = vypocetOdmeny(host.order);

    for (var j = 0; j < host.order.length; j++) {
      var zak = host.order[j];
      var skladPocet = sklad[zak.produkt] || 0;
      if (skladPocet < zak.pocet) dost = false;
      produkty += "<li>" + zak.nazev + ": <b>" + skladPocet + "</b> / <b>" + zak.pocet + "</b></li>";
    }
    html +=
  '<div class="pub-card" id="host' + idx + '">' +
    '<div class="header"><div class="img">' + host.emoji + '</div>' +
      '<div><b>' + host.name + '</b> <span style="font-size:0.85em;color:#2989c5;">(' + host.obt + ')</span></div>' +
    '</div>' +
    '<div class="desc">' + host.desc + '</div>' +
    '<ul style="margin-left:10px;">' + produkty + '</ul>' +
    '<div class="odmena" style="margin:8px 0;font-size:1.1em;"><b>Reward: ' + odmena + ' $</b></div>' +
    '<div class="btn-row">' +
      '<button onclick="splnitZakazku(' + idx + ')" ' + (dost ? '' : 'disabled') + '>Serve Order</button>' +
      '<button class="reject" style="display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:bold;font-size:1.08em;" onclick="kickOutDollar(' + idx + ')">' +
        'Kick Out<span style="font-size:0.95em; font-weight:normal;">($100)</span>' +
      '</button>' +
      '<button class="reject" style="background:#cb8d0b;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:bold;font-size:1.08em;" onclick="kickOutPi(' + idx + ')">' +
        'Kick Out<span style="font-size:0.95em; font-weight:normal;">(5 œñ)</span>' +
      '</button>' +
    '</div>' +
    '<div id="alert' + idx + '"></div>' +
  '</div>';
      }
  document.getElementById("pubCards").innerHTML = html;
}

// Splnƒõn√≠ zak√°zky
// Splnƒõn√≠ zak√°zky
window.splnitZakazku = function(idx) {
  var host = aktHosti[idx];
  var sklad = getSklad();
  var dost = true;
  for (var j = 0; j < host.order.length; j++) {
    var zak = host.order[j];
    if ((sklad[zak.produkt] || 0) < zak.pocet) {
      dost = false;
      break;
    }
  }
  var odmena = vypocetOdmeny(host.order);
  if (dost) {
    // ODEƒåTI PRODUKTY ZE SKLADU
    for (var j = 0; j < host.order.length; j++) {
      var zak = host.order[j];
      sklad[zak.produkt] = (sklad[zak.produkt] || 0) - zak.pocet;
    }
    setSklad(sklad);
    var prachy = getPrachy() + odmena;
    setPrachy(prachy);

    // ---- ZAPI≈† DO STATISTIK ZAK√ÅZEK ----
    var ordersStats = localStorage.getItem("lihobaronStatsOrders");
    var ordersObj = ordersStats ? JSON.parse(ordersStats) : {};
    if (!ordersObj["Bar"]) ordersObj["Bar"] = {};
    if (!ordersObj["Bar"][host.obt]) ordersObj["Bar"][host.obt] = 0;
    ordersObj["Bar"][host.obt] += 1;
    localStorage.setItem("lihobaronStatsOrders", JSON.stringify(ordersObj));
    // ---- HOTOVO ----

    document.getElementById("alert" + idx).innerHTML =
      '<div class="done"><span class="icon">‚úÖ</span> Order completed! +' + odmena + ' $</div>';
    setTimeout(function() { vyhoditHosta(idx, true); }, 1100);
  } else {
    var chybi = [];
    for (var j = 0; j < host.order.length; j++) {
      var zak = host.order[j];
      if ((sklad[zak.produkt] || 0) < zak.pocet) {
        chybi.push(zak.nazev + " (" + (zak.pocet - (sklad[zak.produkt] || 0)) + ")");
      }
    }
    document.getElementById("alert" + idx).innerHTML =
      '<div class="alert"><span class="icon">‚ùó</span> Missing: ' + chybi.join(", ") + '</div>';
  }
};


// Vyhozen√≠ hosta = vygeneruj nov√©ho (n√°hodn√Ω typ + obt√≠≈ænost)
window.vyhoditHosta = function(idx, splneno) {
  aktHosti[idx] = generujHosta();
  ulozHosty();
  renderPubCards();
};

renderPubCards();
window.kickOutDollar = function(idx) {
  var balance = getMoney();  // POZOR, getMoney, ne getPrachy!
  if (balance >= 100) {
    localStorage.setItem("lihobaronFarmCoins", balance - 100);
    vyhoditHosta(idx, true);
    document.getElementById("money").textContent = getMoney();
  } else {
    document.getElementById("alert" + idx).innerHTML =
      '<div class="alert"><span class="icon">‚ùó</span> Not enough money!</div>';
  }
};

window.kickOutPi = function(idx) {
  var pi = getPi();
  if (pi >= 5) {
    localStorage.setItem("lihobaronPi", pi - 5);
    vyhoditHosta(idx, true);
    document.getElementById("pi-balance").textContent = getPi();
  } else {
    document.getElementById("alert" + idx).innerHTML =
      '<div class="alert"><span class="icon">‚ùó</span> Not enough Pi coins!</div>';
  }
};

window.addEventListener("storage", function(e) {
  if (e.key === "lihobaronFarmStorage") renderPubCards();
});
document.addEventListener("visibilitychange", function() {
  if (!document.hidden) renderPubCards();
});
window.addEventListener("storage", function() {
  document.getElementById("money").textContent = getMoney();
  document.getElementById("pi-balance").textContent = getPi();
});

</script>
</body>
</html>
