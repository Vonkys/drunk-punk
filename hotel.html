<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Drunk - Punk</title>
 <link rel="icon" href="favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f8f8fa; margin: 0; padding: 0; padding-top: 48px;}
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      background: #2196f3;
      color: white;
      display: flex;
      justify-content: flex-end;
      gap: 2px;
      z-index: 1000;
      box-shadow: 0 2px 8px #0002;
      padding: 7px 0;
    }
    h1 { text-align: center; color: #208278; margin-top: 30px; }
    @media (max-width: 600px) {
  h1 { margin-top: 70px;} /* nebo klidnƒõ 20px, uprav si podle oka */
  }
    .nav-link {
      color: white;
      padding: 7px 24px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.07em;
      border-radius: 0 0 10px 10px;
      transition: background 0.18s;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .nav-link.active, .nav-link:hover {
      background: #1760a3;
    }
    @media (max-width:520px) {
      .nav-bar { font-size: 0.97em; }
    }
    @media (max-width:600px) {
      .nav-bar { justify-content: center; flex-wrap: wrap; font-size: 0.97em; }
      .nav-link { padding: 7px 8px; font-size: 1em;}
    }
    .placeholder-box {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 16px #b7d9db35;
      margin: 80px auto 0 auto;
      padding: 36px 16px 30px 16px;
      max-width: 410px;
      text-align: center;
    }
    .placeholder-img {
      font-size: 3.3em;
      margin-bottom: 12px;
      opacity: 0.92;
    }
    .placeholder-text {
      color: #1e4185;
      font-size: 1.35em;
      font-weight: bold;
      letter-spacing: 0.02em;
      margin-top: 12px;
    }
   .nav-link-stats {
      background: #e26e08 !important;  /* zlat√°, nebo t≈ôeba #ff66a3, #a0e370, prostƒõ nƒõco co nikde jinde nen√≠ */
      color: #333 !important;
      border-radius: 11px;
      margin-left: 6px;
     font-size: 1.32em;  /* vƒõt≈°√≠ emoji, a≈• to sv√≠t√≠ */
     box-shadow: 0 2px 10px #ffd70033;
     border: 2.5px solid #fff;
     filter: saturate(1.4) brightness(1.12);
    }
   .back-disketa {
  position: fixed;
  top: 65px; /* nebo 60px podle p≈ôesn√© v√Ω≈°ky navigace! */
  left: 10px;
  font-size: 2em;
  background: #22c55e;
  border: none;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  cursor: pointer;
  padding: 0.08em 0.42em 0.13em 0.42em;
  z-index: 2002;
  transition: background 0.18s;
  line-height: 1.1em;
}

.back-disketa:hover {
  background: #16a34a;
}
@media (max-width:600px) {
  .back-disketa {
    top: 95px; /* pokud m√° navigace na mobilu vƒõt≈°√≠ v√Ω≈°ku */
    left: 10px;
    font-size: 1.6em;
    padding: 0.02em 0.33em 0.13em 0.33em;
  }
}
 </style>
</head>
<body>
  <div class="nav-bar">
    <a href="pestovani.html" class="nav-link">üå± Grow Sh*t</a>
<a href="vyroba.html" class="nav-link">‚öóÔ∏è Brewing</a>
<a href="jzd.html" class="nav-link">üê∑ Coop</a>
<a href="sklad.html" class="nav-link">üì¶ Stash</a>
<a href="hotel.html" class="nav-link active">üè® Motel</a>
<a href="pub.html" class="nav-link">üè° Bar</a>
<a href="market.html" class="nav-link">üè™ Bazaar</a>
<a href="finance.html" class="nav-link">üí∞ Wallet</a>
<a class="nav-link nav-link-stats" href="statistiky.html">üìä</a>  
</div>
<button class="back-disketa" onclick="saveLocalStorageToCloud()" title="Save game to cloud">
  üíæ
</button>
<h1>üè® Motel</h1>
<div id="msg" style="color:#1760a3; margin:14px 0 0 0; font-weight:bold; font-size:1.13em; text-align:center; width:100%; display:block;"></div>
<div class="placeholder-box">
    <div class="placeholder-img">üè®</div>
    <div class="placeholder-text">Motel coming soon. Don‚Äôt get too comfy yet! </div>
</div>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyCfPJJL8cbfxmpWpHG5_icQOZjzGWSpeZI",
    authDomain: "drunk-punk.firebaseapp.com",
    projectId: "drunk-punk",
    storageBucket: "drunk-punk.firebasestorage.app",
    messagingSenderId: "749798531604",
    appId: "1:749798531604:web:9e702aee7c9a2599627d01",
    measurementId: "G-JSFRP622EL"
};
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const firestore = firebase.firestore();
// Po inicializaci Firebase
firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    showMsg("P≈ôihl√°≈°en jako: " + (user.email || user.uid));
    // (M≈Ø≈æe≈° tu povolit tlaƒç√≠tka/save nebo vykreslit v√≠c informac√≠)
  } else {
    showMsg("Nejsi p≈ôihl√°≈°en! Ulo≈æen√≠ bude fungovat a≈æ po p≈ôihl√°≈°en√≠ na hlavn√≠ str√°nce.");
    // (Kdy≈æ chce≈°, m≈Ø≈æe≈° schovat SAVE tlaƒç√≠tko: document.querySelector('.back-disketa').style.display='none';)
  }
});
function saveLocalStorageToCloud() {
    var piUser = localStorage.getItem("piUser");
    if (!piUser) {
        if (!window.Pi) {
            showMsg("Pi SDK nen√≠ naƒçteno!");
            return;
        }
        // Spust√≠ login a pak ulo≈æ√≠ znovu
        Pi.authenticate(["username"], function(){})
        .then(function(auth) {
            if (auth && auth.user && auth.user.username) {
                localStorage.setItem("piUser", auth.user.username);
                saveLocalStorageToCloud(); // Zkus znovu, teƒè u≈æ bude≈° p≈ôihl√°≈°en√Ω
            } else {
                showMsg("Nepoda≈ôilo se p≈ôihl√°sit.");
            }
        })
        .catch(function(err) {
            showMsg("Chyba p≈ôi loginu: " + err.message);
        });
        return;
    }
    // Ukl√°d√°me podle piUser jm√©na
    var data = {};
    for (var i = 0; i < localStorage.length; i++) {
        var key = localStorage.key(i);
        data[key] = localStorage.getItem(key);
    }
    firestore.collection("saves").doc(piUser).set({
        data: data,
        savedAt: new Date().toISOString()
    }).then(function () {
        showMsg("‚úÖ Game saved!");
    }).catch(function (error) {
        showMsg("Saving error: " + error.message);
    });
}

function showMsg(msg) {
  var el = document.getElementById("msg");
  if (!el) return; // fallback kdyby omylem chybƒõl
  el.textContent = msg;
  setTimeout(function() { el.textContent = ""; }, 1800);
}
</script>
</body>
</html>
